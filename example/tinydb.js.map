{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/core/Table.ts","src/core/TinyDB.ts","src/core/index.ts"],"names":[],"mappings":"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","file":"tinydb.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import { ITinyDB } from \"./types/index\";\n\n// 操作 table 使用\nexport default class Table {\n  static of(option: ITinyDB.IInvokeTable) {\n    return new Table(option)\n  }\n  private name: string\n  private db: IDBDatabase | undefined;\n  private mode: ITinyDB.IOperateMode = 'readwrite'\n  constructor(option: ITinyDB.IInvokeTable) {\n    const { name, db } = option\n    this.name = name\n    this.db = db\n  }\n  setMode(mode: ITinyDB.IOperateMode) {\n    this.mode = mode\n    return this\n  }\n  getMode() {\n    return this.mode\n  }\n  // create transaction \n  transaction(name: string) {\n    const transaction = this.db.transaction([name], this.getMode())\n    return transaction\n  }\n  // open or conntect this table \n  requestStore() {\n    const { name } = this\n    return this.transaction(name).objectStore(name)\n  }\n  insert(record: any) {\n    const promise = new Promise((resolve, reject) => {\n      const addRequest = this.requestStore().add(record)\n      const unlisten = () => {\n        addRequest.removeEventListener('success', success)\n        addRequest.removeEventListener('error', error)\n      }\n      const success = () => {\n        resolve({\n          msg: 'add one record successfully!',\n          status: true,\n          // activedRequest: addRequest\n        })\n        unlisten()\n      }\n      const error = () => {\n        reject({\n          msg: 'add one record failed!',\n          status: false,\n          activedRequest: addRequest\n        })\n      }\n      addRequest.addEventListener('success', success)\n      addRequest.addEventListener('error', error)\n    })\n    return promise\n  }\n  update(option: ITinyDB.IGetIndex, record: any) {\n    if(!option) {\n      throw new Error('must be one index or option')\n    }\n    if(typeof option === 'object') {\n      return this.updateByOption(option, record)\n    } else {\n      return this.updateByPrimaryKey(option as ITinyDB.IValidateKey, record)\n    }\n  }\n  updateByOption(option: ITinyDB.IGetIndex, record: any) {\n    const promise = new Promise((resolve, reject) => {\n      const innerUpdate = (result: any[]) => {\n        if (!result.length) {\n          console.warn('not found this record')\n          resolve([])\n        }\n        for (const item of result) {\n          const store = this.requestStore()\n          const newRecord = {\n            ...item,\n            ...record\n          }\n          const updateRequest = store.put(newRecord)\n          updateRequest.onsuccess = () => {\n            resolve({\n              msg: 'update successfully!',\n              status: true,\n            })\n          }\n          updateRequest.onerror = () => {\n            reject({\n              msg: 'update failed!',\n              status: false,\n              activedRequest: updateRequest\n            })\n          }\n        }\n      }\n      this.getByIndex(option).then((result: any[]) => innerUpdate(result))\n    })\n    return promise\n  }\n  updateByPrimaryKey(primaryKey: ITinyDB.IValidateKey, record: any) {\n    const promise = new Promise((resolve, reject) => {\n      const innerUpdate = (result: any[]) => {\n        if (!result) {\n          console.warn('not found this record')\n          resolve([])\n        }\n        const store = this.requestStore()\n        const newRecord = {\n          ...result,\n          ...record\n        }\n        const updateRequest = store.put(newRecord)\n        updateRequest.onsuccess = () => {\n          resolve({\n            msg: 'update successfully!',\n            status: true,\n          })\n        }\n        updateRequest.onerror = () => {\n          reject({\n            msg: 'update failed!',\n            status: false,\n            activedRequest: updateRequest\n          })\n        }\n      }\n      this.getByPrimaryKey(primaryKey).then((result: any[]) => innerUpdate(result))\n    })\n\n    return promise\n  }\n  getByPrimaryKey(primaryKey: ITinyDB.IValidateKey) {\n    return new Promise((resolve, reject) => {\n      const getRequest = this.requestStore().get(primaryKey)\n      getRequest.onsuccess = () => {\n        resolve(getRequest.result)\n      }\n      getRequest.onerror = () => {\n        reject({\n          msg: 'not found this primary key!',\n          status: false,\n          activedRequest: getRequest\n        })\n      }\n    })\n  }\n  getByIndex(option: ITinyDB.IGetIndex) {\n\n    if(!option || !option.value) {\n      return Promise.reject({\n        msg: 'must have one index!',\n      })\n    }\n    const { index, value } = option\n    return new Promise((resolve, reject) => {\n      const getRequest = this.requestStore().index(index).getAll(value)\n      getRequest.onsuccess = () => {\n        if(getRequest.result.length) {\n          resolve(getRequest.result)\n        } else {\n          console.warn('not find record!')\n          resolve([])\n        }\n      }\n      getRequest.onerror = () => {\n        reject({\n          msg: 'not found this index!',\n          status: false,\n          activedRequest: getRequest\n        })\n      }\n    })\n  }\n  getAll() {\n    return new Promise((resolve, reject) => {\n      const getRequest = this.requestStore().getAll()\n      getRequest.onsuccess = () => {\n        resolve(getRequest.result)\n      }\n      getRequest.onerror = () => {\n        reject(getRequest.result)\n      }\n    })\n  }\n  limit(option: ITinyDB.ILimt) {\n    const { length, start } = option\n    let index = start || 0\n    let limit = length\n    \n    if(!option || !option.length) {\n      throw console.error('please set length')\n    }\n    return new Promise((resolve, reject) => {\n      let current = []\n      const cursorRequest = this.requestStore().openCursor()\n      cursorRequest.onsuccess = () => {\n        const cursor = cursorRequest.result as IDBCursorWithValue;\n        if(cursor) {\n          if(cursor.key > index && limit) {\n            current.push(cursor.value)\n            limit --\n          }\n          if(limit !== 0) {\n            cursor.continue()\n          }else {\n            resolve(current)\n          }\n        } else {\n          resolve(current)\n        }\n      }\n      cursorRequest.onerror = () => {\n        const cursorError = cursorRequest.error;\n        reject(cursorError)\n      }\n    })\n  }\n  some(option: ITinyDB.ISomeOptions) {\n    const { index, lower, upper } = option\n    return new Promise((resolve, reject) => {\n      const cache: any = [];\n      const indexs = this.requestStore().index(index);\n      const range = IDBKeyRange.bound(lower, upper)\n      const cursorRangeRequest = indexs.openCursor(range)\n      cursorRangeRequest.onsuccess = () => {\n        const result = cursorRangeRequest.result;\n        if (result) {\n          cache.push(result.value)\n          result.continue()\n        } else {\n          resolve(cache)\n        }\n      }\n      cursorRangeRequest.onerror = () => {\n        reject(cursorRangeRequest.error)\n      }\n    })\n  }\n  deleteRecord(option: ITinyDB.IGetIndex ){\n    if(!option) {\n      throw new Error('must be one index or option')\n    }\n    if(typeof option === 'object') {\n      return this.deleteRecordByOption(option)\n    } else {\n      return this.deleteRecordByPrimaryKey(option as ITinyDB.IValidateKey)\n    }\n  }\n  deleteRecordByOption(option: ITinyDB.IGetIndex) {\n    return new Promise((resolve, reject) => {\n      this.getByIndex(option).then((data: any[]) => {\n        if (!data.length) {\n          console.warn('not find this record')\n          return false\n        }\n\n        for (const item of data) {\n          const store = this.requestStore()\n          const { keyPath } = store\n          const deleteRequest = store.delete(item[keyPath as string])\n          deleteRequest.onsuccess = () => {\n            resolve({\n              msg: 'delete successfully!',\n              status: true\n            })\n          }\n          deleteRequest.onerror = () => {\n            reject({\n              msg: 'delete failed!',\n              status: false\n            })\n          }\n        }\n      })\n    })\n  }\n  deleteRecordByPrimaryKey(primaryKey: ITinyDB.IValidateKey) {\n    return new Promise((resolve, reject) => {\n      this.getByPrimaryKey(primaryKey).then( (data)=> {\n        if(!data) {\n          console.warn('not find this record')\n          return false\n        }\n        const store = this.requestStore()\n        const { keyPath } = store\n        const deleteRequest = store.delete(data[keyPath as string])\n        deleteRequest.onsuccess = () => {\n          resolve({\n            msg: 'delete successfully!',\n            status: true\n          })\n        }\n        deleteRequest.onerror = () => {\n          reject({\n            msg: 'delete failed!',\n            status: false\n          })\n        }\n      })\n    })\n  }\n  clear() {\n    return new Promise((resolve, reject) => {\n      const clearRequest = this.requestStore().clear()\n      clearRequest.onsuccess = () => {\n        resolve({\n          msg: 'clear successfully!',\n          status: true\n        })\n      }\n      clearRequest.onerror = () => {\n        reject({\n          msg: 'clear failed!',\n          status: false,\n          activedRequest: clearRequest\n        })\n      }\n    })\n  }\n  destroyed() {\n    this.db = undefined\n    this.name = ''\n  }\n}","import Table from \"./Table\";\nimport { ITinyDB } from \"./types/index\";\n\n\nconst win = (typeof window == \"undefined\" ? global : window);\n\nconst IN_DB = win.indexedDB\n\nexport default class TinyDB {\n  private dbName: string;\n  private version: number;\n  private db: IDBDatabase\n  static of() {\n    return new TinyDB\n  }\n  constructor() { }\n  setup(options: ITinyDB.IDatabase) {\n    const { dbName } = options\n    this.dbName = dbName\n    return this;\n  }\n  getVersion() {\n    return this.version ? this.version : 1\n  }\n  setVersion(version: number) {\n    this.version = version\n    return this\n  }\n  upgrade(db: IDBDatabase, options: ITinyDB.ITableConfig[]) {\n    this.setVersion(db.version)\n    this.db = db\n\n    for (const table of options) {\n      if (!db.objectStoreNames.contains(table.name)) {\n        const store = db.createObjectStore(table.name, {\n          keyPath: table.primaryKey,\n          autoIncrement: table.autoIncrement ? true : false\n        })\n        if (table.indexs && table.indexs.length !== 0) {\n          for (const index of table.indexs) {\n            this.createIndex(store, {\n              index: index.index,\n              relativeIndex: index.relativeIndex,\n              unique: index.unique\n            })\n          }\n        }\n      }\n    }\n  }\n  createIndex(db: IDBObjectStore, options: ITinyDB.IIndex) {\n    db.createIndex(options.index, options.relativeIndex, { unique: options.unique })\n  }\n  createTable(options: ITinyDB.ITableConfig[] = undefined) {\n    const { dbName } = this\n\n    if (options === undefined) {\n      return console.error('database table config must a list')\n    }\n\n    const request = IN_DB.open(dbName, this.getVersion())\n\n    const unlisten = () => {\n      request.removeEventListener('upgradeneeded', upgrade);\n    };\n\n    const upgrade = () => {\n      this.upgrade(request.result, options)\n      unlisten()\n    }\n\n    request.addEventListener('upgradeneeded', upgrade)\n\n    const promise = new Promise((resolve, reject) => {\n      this.connect(request).then(db => {\n        const versionChange = (evt: IDBVersionChangeEvent) => {\n          db.close()\n          db.removeEventListener('versionchange', versionChange)\n        }\n        db.addEventListener('versionchange', versionChange)\n      })\n    })\n    return promise\n  }\n  deleteDatabase(name: string) {\n   \n    const request = IN_DB.deleteDatabase(name)\n    const promise = new Promise((resolve, reject) => {\n      request.onsuccess = () => {\n        const msg: ITinyDB.IState = {\n          msg: 'Database deleted successfully',\n          status: true\n        }\n        resolve(msg)\n      }\n      request.onerror = () => {\n        \n        const msg: ITinyDB.IState = {\n          msg: 'Database deleted failed',\n          status: true,\n          activedRequest: request\n        }\n        reject(msg)\n      }\n    })\n    return promise\n  }\n  connect<T>(request: IDBRequest<T>, options?: ITinyDB.IRequestCallback): Promise<T> {\n\n    const promise = new Promise<T>((resolve, reject) => {\n\n      const unlisten = () => {\n        request.removeEventListener('success', success);\n        request.removeEventListener('error', error);\n      };\n\n      const success = () => {\n        if (options && options.successfully) {\n          options.successfully(request)\n        }\n        resolve(request.result);\n        unlisten()\n      }\n      const blocked = () => {\n        if (options && options.blocked) {\n          options.blocked(request)\n        }\n      }\n\n      const error = () => {\n        if (options && options.error) {\n          options.error(request)\n        }\n\n        reject(request.error);\n        unlisten()\n      }\n      request.addEventListener('success', success)\n      request.addEventListener('error', error)\n      request.addEventListener('blocked', blocked)\n    })\n\n    return promise\n  }\n  insert(table_name: string, record: any) {\n    const promise = new Promise((resolve, reject) => {\n      const request = IN_DB.open(this.dbName, this.getVersion())\n      this.connect(request).then((db: IDBDatabase) => {\n        const operator = Table.of({\n          name: table_name,\n          db\n        })\n        operator.insert(record).then(res => resolve(res)).catch((err) => reject(err))\n      })\n    })\n    return promise\n  }\n  updateRecord(table_name: string, options: ITinyDB.IGetIndex, record: any) {\n    const promise = new Promise((resolve, reject) => {\n      const request = IN_DB.open(this.dbName, this.getVersion())\n      this.connect(request).then((db: IDBDatabase) => {\n        const operator = Table.of({\n          name: table_name,\n          db\n        })\n        operator.update(options, record).then(res => resolve(res)).catch((err) => reject(err))\n      })\n    })\n    return promise\n  }\n  getAll(table_name: string) {\n    const promise = new Promise((resolve, reject) => {\n      const request = IN_DB.open(this.dbName, this.getVersion())\n      this.connect(request).then((db: IDBDatabase) => {\n        const operator = Table.of({\n          name: table_name,\n          db\n        })\n        operator.getAll().then(res => resolve(res)).catch((err) => reject(err))\n      })\n    })\n    return promise\n  }\n  getByPrimaryKey(table_name: string, key: ITinyDB.IValidateKey) {\n    const promise = new Promise((resolve, reject) => {\n      const request = IN_DB.open(this.dbName, this.getVersion())\n      this.connect(request).then((db: IDBDatabase) => {\n        const operator = Table.of({\n          name: table_name,\n          db\n        })\n        operator.getByPrimaryKey(key).then(res => resolve(res)).catch((err) => reject(err))\n      })\n    })\n    return promise\n  }\n  getByIndex(table_name: string, options: ITinyDB.IGetIndex) {\n    const promise = new Promise((resolve, reject) => {\n      const request = IN_DB.open(this.dbName, this.getVersion())\n      this.connect(request).then((db: IDBDatabase) => {\n        const operator = Table.of({\n          name: table_name,\n          db\n        })\n        operator.getByIndex(options).then(res => resolve(res)).catch((err) => reject(err))\n      })\n    })\n    return promise\n  }\n  deleteRecord(table_name: string, options: ITinyDB.IGetIndex) {\n    const promise = new Promise((resolve, reject) => {\n      const request = IN_DB.open(this.dbName, this.getVersion())\n      this.connect(request).then((db: IDBDatabase) => {\n        const operator = Table.of({\n          name: table_name,\n          db\n        })\n        operator.deleteRecord(options).then(res => resolve(res)).catch((err) => reject(err))\n      })\n    })\n    return promise\n  }\n  deleteTable(tableName: string){\n    const promise = new Promise((resolve, reject)=> {\n      const conn_request = IN_DB.open(this.dbName, this.getVersion())\n      conn_request.onupgradeneeded = (evt: IDBVersionChangeEvent) => {\n        const db = conn_request.result;\n\n        this.db = db\n        this.setVersion(db.version)\n\n        if(evt.oldVersion < this.getVersion()){\n          db.deleteObjectStore(tableName)\n        }\n      }\n      conn_request.onsuccess = () => {\n        resolve({\n          msg:' deleted table successfully!'\n        })\n      }\n      conn_request.onerror = () => {\n        reject({\n          msg:' deleted table failed!'\n        })\n      }\n    })\n    \n    return promise\n  }\n  some(table_name: string, options: ITinyDB.ISomeOptions) {\n    const promise = new Promise((resolve, reject) => {\n      const request = IN_DB.open(this.dbName, this.getVersion())\n      this.connect(request).then((db: IDBDatabase) => {\n        const operator = Table.of({\n          name: table_name,\n          db\n        })\n        operator.some(options).then(res => resolve(res)).catch((err) => reject(err))\n      })\n    })\n    return promise\n  }\n  clearTableRecord(table_name: string) {\n    const promise = new Promise((resolve, reject) => {\n      const request = IN_DB.open(this.dbName, this.getVersion())\n      this.connect(request).then((db: IDBDatabase) => {\n        const operator = Table.of({\n          name: table_name,\n          db\n        })\n        operator.clear().then(res => resolve(res)).catch((err) => reject(err))\n      })\n    })\n    return promise\n  }\n  getDataWithLimits(table_name: string, options: ITinyDB.ILimt) {\n    const promise = new Promise((resolve, reject) => {\n      const request = IN_DB.open(this.dbName, this.getVersion())\n      this.connect(request).then((db: IDBDatabase) => {\n        const operator = Table.of({\n          name: table_name,\n          db\n        })\n        operator.limit(options).then(res => resolve(res)).catch((err) => reject(err))\n      })\n    })\n    return promise\n  }\n}\n\n","import TinyDB from \"./TinyDB\";\n\nif(!window.TinyDB) {\n  window.TinyDB = TinyDB;\n}\n\nexport { \n  TinyDB\n}"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvY29yZS9UYWJsZS50cyIsInNyYy9jb3JlL1RpbnlEQi50cyIsInNyYy9jb3JlL2luZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNFQTtBQUNBLElBQUEsUUFBQSxhQUFBLFlBQUE7QUFPRSxhQUFBLEtBQUEsQ0FBWSxNQUFaLEVBQXdDO0FBRGhDLGFBQUEsSUFBQSxHQUE2QixXQUE3QjtBQUVFLFlBQUEsT0FBYSxPQUFULElBQUo7QUFBQSxZQUFNLEtBQU8sT0FBTCxFQUFSO0FBQ1IsYUFBSyxJQUFMLEdBQVksSUFBWjtBQUNBLGFBQUssRUFBTCxHQUFVLEVBQVY7QUFDRDtBQVZNLFVBQUEsRUFBQSxHQUFQLFVBQVUsTUFBVixFQUFzQztBQUNwQyxlQUFPLElBQUksS0FBSixDQUFVLE1BQVYsQ0FBUDtBQUNELEtBRk07QUFXUCxVQUFBLFNBQUEsQ0FBQSxPQUFBLEdBQUEsVUFBUSxJQUFSLEVBQWtDO0FBQ2hDLGFBQUssSUFBTCxHQUFZLElBQVo7QUFDQSxlQUFPLElBQVA7QUFDRCxLQUhEO0FBSUEsVUFBQSxTQUFBLENBQUEsT0FBQSxHQUFBLFlBQUE7QUFDRSxlQUFPLEtBQUssSUFBWjtBQUNELEtBRkQ7QUFHQTtBQUNBLFVBQUEsU0FBQSxDQUFBLFdBQUEsR0FBQSxVQUFZLElBQVosRUFBd0I7QUFDdEIsWUFBTSxjQUFjLEtBQUssRUFBTCxDQUFRLFdBQVIsQ0FBb0IsQ0FBQyxJQUFELENBQXBCLEVBQTRCLEtBQUssT0FBTCxFQUE1QixDQUFwQjtBQUNBLGVBQU8sV0FBUDtBQUNELEtBSEQ7QUFJQTtBQUNBLFVBQUEsU0FBQSxDQUFBLFlBQUEsR0FBQSxZQUFBO0FBQ1UsWUFBQSxPQUFTLEtBQUwsSUFBSjtBQUNSLGVBQU8sS0FBSyxXQUFMLENBQWlCLElBQWpCLEVBQXVCLFdBQXZCLENBQW1DLElBQW5DLENBQVA7QUFD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TUFBVixFQUFnQjtBQUMxQyxnQkFBTSxVQUFVLE1BQU0sSUFBTixDQUFXLE1BQUssTUFBaEIsRUFBd0IsTUFBSyxVQUFMLEVBQXhCLENBQWhCO0FBQ0Esa0JBQUssT0FBTCxDQUFhLE9BQWIsRUFBc0IsSUFBdEIsQ0FBMkIsVUFBQyxFQUFELEVBQWdCO0FBQ3pDLG9CQUFNLFdBQVcsUUFBQSxPQUFBLENBQU0sRUFBTixDQUFTO0FBQ3hCLDBCQUFNLFVBRGtCO0FBRXhCLHdCQUFFO0FBRnNCLGlCQUFULENBQWpCO0FBSUEseUJBQVMsS0FBVCxDQUFlLE9BQWYsRUFBd0IsSUFBeEIsQ0FBNkIsVUFBQSxHQUFBLEVBQUc7QUFBSSwyQkFBQSxRQUFBLEdBQUEsQ0FBQTtBQUFZLGlCQUFoRCxFQUFrRCxLQUFsRCxDQUF3RCxVQUFDLEdBQUQsRUFBSTtBQUFLLDJCQUFBLE9BQUEsR0FBQSxDQUFBO0FBQVcsaUJBQTVFO0FBQ0QsYUFORDtBQU9ELFNBVGUsQ0FBaEI7QUFVQSxlQUFPLE9BQVA7QUFDRCxLQVpEO0FBYUYsV0FBQSxNQUFBO0FBQUMsQ0F4UkQsRUFBQTs7Ozs7Ozs7OztBQ1JBLElBQUEsV0FBQSxRQUFBLFVBQUEsQ0FBQTtBQU9FLFFBQUEsTUFBQSxHQVBLLFNBQUEsT0FPTDtBQUxGLElBQUcsQ0FBQyxPQUFPLE1BQVgsRUFBbUI7QUFDakIsV0FBTyxNQUFQLEdBQWdCLFNBQUEsT0FBaEI7QUFDRCIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsImltcG9ydCB7IElUaW55REIgfSBmcm9tIFwiLi90eXBlcy9pbmRleFwiO1xuXG4vLyDmk43kvZwgdGFibGUg5L2/55SoXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUYWJsZSB7XG4gIHN0YXRpYyBvZihvcHRpb246IElUaW55REIuSUludm9rZVRhYmxlKSB7XG4gICAgcmV0dXJuIG5ldyBUYWJsZShvcHRpb24pXG4gIH1cbiAgcHJpdmF0ZSBuYW1lOiBzdHJpbmdcbiAgcHJpdmF0ZSBkYjogSURCRGF0YWJhc2UgfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgbW9kZTogSVRpbnlEQi5JT3BlcmF0ZU1vZGUgPSAncmVhZHdyaXRlJ1xuICBjb25zdHJ1Y3RvcihvcHRpb246IElUaW55REIuSUludm9rZVRhYmxlKSB7XG4gICAgY29uc3QgeyBuYW1lLCBkYiB9ID0gb3B0aW9uXG4gICAgdGhpcy5uYW1lID0gbmFtZVxuICAgIHRoaXMuZGIgPSBkYlxuICB9XG4gIHNldE1vZGUobW9kZTogSVRpbnlEQi5JT3BlcmF0ZU1vZGUpIHtcbiAgICB0aGlzLm1vZGUgPSBtb2RlXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuICBnZXRNb2RlKCkge1xuICAgIHJldHVybiB0aGlzLm1vZGVcbiAgfVxuICAvLyBjcmVhdGUgdHJhbnNhY3Rpb24gXG4gIHRyYW5zYWN0aW9uKG5hbWU6IHN0cmluZykge1xuICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gdGhpcy5kYi50cmFuc2FjdGlvbihbbmFtZV0sIHRoaXMuZ2V0TW9kZSgpKVxuICAgIHJldHVybiB0cmFuc2FjdGlvblxuICB9XG4gIC8vIG9wZW4gb3IgY29ubnRlY3QgdGhpcyB0YWJsZSBcbiAgcmVxdWVzdFN0b3JlKCkge1xuICAgIGNvbnN0IHsgbmFtZSB9ID0gdGhpc1xuICAgIHJldHVybiB0aGlzLnRyYW5zYWN0aW9uKG5hbWUpLm9iamVjdFN0b3JlKG5hbWUpXG4gIH1cbiAgaW5zZXJ0KHJlY29yZDogYW55KSB7XG4gICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IGFkZFJlcXVlc3QgPSB0aGlzLnJlcXVlc3RTdG9yZSgpLmFkZChyZWNvcmQpXG4gICAgICBjb25zdCB1bmxpc3RlbiA9ICgpID0+IHtcbiAgICAgICAgYWRkUmVxdWVzdC5yZW1vdmVFdmVudExpc3RlbmVyKCdzdWNjZXNzJywgc3VjY2VzcylcbiAgICAgICAgYWRkUmVxdWVzdC5yZW1vdmVFdmVudExpc3RlbmVyKCdlcnJvcicsIGVycm9yKVxuICAgICAgfVxuICAgICAgY29uc3Qgc3VjY2VzcyA9ICgpID0+IHtcbiAgICAgICAgcmVzb2x2ZSh7XG4gICAgICAgICAgbXNnOiAnYWRkIG9uZSByZWNvcmQgc3VjY2Vzc2Z1bGx5IScsXG4gICAgICAgICAgc3RhdHVzOiB0cnVlLFxuICAgICAgICAgIC8vIGFjdGl2ZWRSZXF1ZXN0OiBhZGRSZXF1ZXN0XG4gICAgICAgIH0pXG4gICAgICAgIHVubGlzdGVuKClcbiAgICAgIH1cbiAgICAgIGNvbnN0IGVycm9yID0gKCkgPT4ge1xuICAgICAgICByZWplY3Qoe1xuICAgICAgICAgIG1zZzogJ2FkZCBvbmUgcmVjb3JkIGZhaWxlZCEnLFxuICAgICAgICAgIHN0YXR1czogZmFsc2UsXG4gICAgICAgICAgYWN0aXZlZFJlcXVlc3Q6IGFkZFJlcXVlc3RcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIGFkZFJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignc3VjY2VzcycsIHN1Y2Nlc3MpXG4gICAgICBhZGRSZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZXJyb3IpXG4gICAgfSlcbiAgICByZXR1cm4gcHJvbWlzZVxuICB9XG4gIHVwZGF0ZShvcHRpb246IElUaW55REIuSUdldEluZGV4LCByZWNvcmQ6IGFueSkge1xuICAgIGlmKCFvcHRpb24pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignbXVzdCBiZSBvbmUgaW5kZXggb3Igb3B0aW9uJylcbiAgICB9XG4gICAgaWYodHlwZW9mIG9wdGlvbiA9PT0gJ29iamVjdCcpIHtcbiAgICAgIHJldHVybiB0aGlzLnVwZGF0ZUJ5T3B0aW9uKG9wdGlvbiwgcmVjb3JkKVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy51cGRhdGVCeVByaW1hcnlLZXkob3B0aW9uIGFzIElUaW55REIuSVZhbGlkYXRlS2V5LCByZWNvcmQpXG4gICAgfVxuICB9XG4gIHVwZGF0ZUJ5T3B0aW9uKG9wdGlvbjogSVRpbnlEQi5JR2V0SW5kZXgsIHJlY29yZDogYW55KSB7XG4gICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IGlubmVyVXBkYXRlID0gKHJlc3VsdDogYW55W10pID0+IHtcbiAgICAgICAgaWYgKCFyZXN1bHQubGVuZ3RoKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKCdub3QgZm91bmQgdGhpcyByZWNvcmQnKVxuICAgICAgICAgIHJlc29sdmUoW10pXG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHJlc3VsdCkge1xuICAgICAgICAgIGNvbnN0IHN0b3JlID0gdGhpcy5yZXF1ZXN0U3RvcmUoKVxuICAgICAgICAgIGNvbnN0IG5ld1JlY29yZCA9IHtcbiAgICAgICAgICAgIC4uLml0ZW0sXG4gICAgICAgICAgICAuLi5yZWNvcmRcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgdXBkYXRlUmVxdWVzdCA9IHN0b3JlLnB1dChuZXdSZWNvcmQpXG4gICAgICAgICAgdXBkYXRlUmVxdWVzdC5vbnN1Y2Nlc3MgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXNvbHZlKHtcbiAgICAgICAgICAgICAgbXNnOiAndXBkYXRlIHN1Y2Nlc3NmdWxseSEnLFxuICAgICAgICAgICAgICBzdGF0dXM6IHRydWUsXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgICB1cGRhdGVSZXF1ZXN0Lm9uZXJyb3IgPSAoKSA9PiB7XG4gICAgICAgICAgICByZWplY3Qoe1xuICAgICAgICAgICAgICBtc2c6ICd1cGRhdGUgZmFpbGVkIScsXG4gICAgICAgICAgICAgIHN0YXR1czogZmFsc2UsXG4gICAgICAgICAgICAgIGFjdGl2ZWRSZXF1ZXN0OiB1cGRhdGVSZXF1ZXN0XG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5nZXRCeUluZGV4KG9wdGlvbikudGhlbigocmVzdWx0OiBhbnlbXSkgPT4gaW5uZXJVcGRhdGUocmVzdWx0KSlcbiAgICB9KVxuICAgIHJldHVybiBwcm9taXNlXG4gIH1cbiAgdXBkYXRlQnlQcmltYXJ5S2V5KHByaW1hcnlLZXk6IElUaW55REIuSVZhbGlkYXRlS2V5LCByZWNvcmQ6IGFueSkge1xuICAgIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCBpbm5lclVwZGF0ZSA9IChyZXN1bHQ6IGFueVtdKSA9PiB7XG4gICAgICAgIGlmICghcmVzdWx0KSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKCdub3QgZm91bmQgdGhpcyByZWNvcmQnKVxuICAgICAgICAgIHJlc29sdmUoW10pXG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RvcmUgPSB0aGlzLnJlcXVlc3RTdG9yZSgpXG4gICAgICAgIGNvbnN0IG5ld1JlY29yZCA9IHtcbiAgICAgICAgICAuLi5yZXN1bHQsXG4gICAgICAgICAgLi4ucmVjb3JkXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdXBkYXRlUmVxdWVzdCA9IHN0b3JlLnB1dChuZXdSZWNvcmQpXG4gICAgICAgIHVwZGF0ZVJlcXVlc3Qub25zdWNjZXNzID0gKCkgPT4ge1xuICAgICAgICAgIHJlc29sdmUoe1xuICAgICAgICAgICAgbXNnOiAndXBkYXRlIHN1Y2Nlc3NmdWxseSEnLFxuICAgICAgICAgICAgc3RhdHVzOiB0cnVlLFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgdXBkYXRlUmVxdWVzdC5vbmVycm9yID0gKCkgPT4ge1xuICAgICAgICAgIHJlamVjdCh7XG4gICAgICAgICAgICBtc2c6ICd1cGRhdGUgZmFpbGVkIScsXG4gICAgICAgICAgICBzdGF0dXM6IGZhbHNlLFxuICAgICAgICAgICAgYWN0aXZlZFJlcXVlc3Q6IHVwZGF0ZVJlcXVlc3RcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLmdldEJ5UHJpbWFyeUtleShwcmltYXJ5S2V5KS50aGVuKChyZXN1bHQ6IGFueVtdKSA9PiBpbm5lclVwZGF0ZShyZXN1bHQpKVxuICAgIH0pXG5cbiAgICByZXR1cm4gcHJvbWlzZVxuICB9XG4gIGdldEJ5UHJpbWFyeUtleShwcmltYXJ5S2V5OiBJVGlueURCLklWYWxpZGF0ZUtleSkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCBnZXRSZXF1ZXN0ID0gdGhpcy5yZXF1ZXN0U3RvcmUoKS5nZXQocHJpbWFyeUtleSlcbiAgICAgIGdldFJlcXVlc3Qub25zdWNjZXNzID0gKCkgPT4ge1xuICAgICAgICByZXNvbHZlKGdldFJlcXVlc3QucmVzdWx0KVxuICAgICAgfVxuICAgICAgZ2V0UmVxdWVzdC5vbmVycm9yID0gKCkgPT4ge1xuICAgICAgICByZWplY3Qoe1xuICAgICAgICAgIG1zZzogJ25vdCBmb3VuZCB0aGlzIHByaW1hcnkga2V5IScsXG4gICAgICAgICAgc3RhdHVzOiBmYWxzZSxcbiAgICAgICAgICBhY3RpdmVkUmVxdWVzdDogZ2V0UmVxdWVzdFxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0pXG4gIH1cbiAgZ2V0QnlJbmRleChvcHRpb246IElUaW55REIuSUdldEluZGV4KSB7XG5cbiAgICBpZighb3B0aW9uIHx8ICFvcHRpb24udmFsdWUpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCh7XG4gICAgICAgIG1zZzogJ211c3QgaGF2ZSBvbmUgaW5kZXghJyxcbiAgICAgIH0pXG4gICAgfVxuICAgIGNvbnN0IHsgaW5kZXgsIHZhbHVlIH0gPSBvcHRpb25cbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3QgZ2V0UmVxdWVzdCA9IHRoaXMucmVxdWVzdFN0b3JlKCkuaW5kZXgoaW5kZXgpLmdldEFsbCh2YWx1ZSlcbiAgICAgIGdldFJlcXVlc3Qub25zdWNjZXNzID0gKCkgPT4ge1xuICAgICAgICBpZihnZXRSZXF1ZXN0LnJlc3VsdC5sZW5ndGgpIHtcbiAgICAgICAgICByZXNvbHZlKGdldFJlcXVlc3QucmVzdWx0KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUud2Fybignbm90IGZpbmQgcmVjb3JkIScpXG4gICAgICAgICAgcmVzb2x2ZShbXSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZ2V0UmVxdWVzdC5vbmVycm9yID0gKCkgPT4ge1xuICAgICAgICByZWplY3Qoe1xuICAgICAgICAgIG1zZzogJ25vdCBmb3VuZCB0aGlzIGluZGV4IScsXG4gICAgICAgICAgc3RhdHVzOiBmYWxzZSxcbiAgICAgICAgICBhY3RpdmVkUmVxdWVzdDogZ2V0UmVxdWVzdFxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0pXG4gIH1cbiAgZ2V0QWxsKCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCBnZXRSZXF1ZXN0ID0gdGhpcy5yZXF1ZXN0U3RvcmUoKS5nZXRBbGwoKVxuICAgICAgZ2V0UmVxdWVzdC5vbnN1Y2Nlc3MgPSAoKSA9PiB7XG4gICAgICAgIHJlc29sdmUoZ2V0UmVxdWVzdC5yZXN1bHQpXG4gICAgICB9XG4gICAgICBnZXRSZXF1ZXN0Lm9uZXJyb3IgPSAoKSA9PiB7XG4gICAgICAgIHJlamVjdChnZXRSZXF1ZXN0LnJlc3VsdClcbiAgICAgIH1cbiAgICB9KVxuICB9XG4gIGxpbWl0KG9wdGlvbjogSVRpbnlEQi5JTGltdCkge1xuICAgIGNvbnN0IHsgbGVuZ3RoLCBzdGFydCB9ID0gb3B0aW9uXG4gICAgbGV0IGluZGV4ID0gc3RhcnQgfHwgMFxuICAgIGxldCBsaW1pdCA9IGxlbmd0aFxuICAgIFxuICAgIGlmKCFvcHRpb24gfHwgIW9wdGlvbi5sZW5ndGgpIHtcbiAgICAgIHRocm93IGNvbnNvbGUuZXJyb3IoJ3BsZWFzZSBzZXQgbGVuZ3RoJylcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGxldCBjdXJyZW50ID0gW11cbiAgICAgIGNvbnN0IGN1cnNvclJlcXVlc3QgPSB0aGlzLnJlcXVlc3RTdG9yZSgpLm9wZW5DdXJzb3IoKVxuICAgICAgY3Vyc29yUmVxdWVzdC5vbnN1Y2Nlc3MgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGN1cnNvciA9IGN1cnNvclJlcXVlc3QucmVzdWx0IGFzIElEQkN1cnNvcldpdGhWYWx1ZTtcbiAgICAgICAgaWYoY3Vyc29yKSB7XG4gICAgICAgICAgaWYoY3Vyc29yLmtleSA+IGluZGV4ICYmIGxpbWl0KSB7XG4gICAgICAgICAgICBjdXJyZW50LnB1c2goY3Vyc29yLnZhbHVlKVxuICAgICAgICAgICAgbGltaXQgLS1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYobGltaXQgIT09IDApIHtcbiAgICAgICAgICAgIGN1cnNvci5jb250aW51ZSgpXG4gICAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgcmVzb2x2ZShjdXJyZW50KVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXNvbHZlKGN1cnJlbnQpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGN1cnNvclJlcXVlc3Qub25lcnJvciA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgY3Vyc29yRXJyb3IgPSBjdXJzb3JSZXF1ZXN0LmVycm9yO1xuICAgICAgICByZWplY3QoY3Vyc29yRXJyb3IpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuICBzb21lKG9wdGlvbjogSVRpbnlEQi5JU29tZU9wdGlvbnMpIHtcbiAgICBjb25zdCB7IGluZGV4LCBsb3dlciwgdXBwZXIgfSA9IG9wdGlvblxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCBjYWNoZTogYW55ID0gW107XG4gICAgICBjb25zdCBpbmRleHMgPSB0aGlzLnJlcXVlc3RTdG9yZSgpLmluZGV4KGluZGV4KTtcbiAgICAgIGNvbnN0IHJhbmdlID0gSURCS2V5UmFuZ2UuYm91bmQobG93ZXIsIHVwcGVyKVxuICAgICAgY29uc3QgY3Vyc29yUmFuZ2VSZXF1ZXN0ID0gaW5kZXhzLm9wZW5DdXJzb3IocmFuZ2UpXG4gICAgICBjdXJzb3JSYW5nZVJlcXVlc3Qub25zdWNjZXNzID0gKCkgPT4ge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBjdXJzb3JSYW5nZVJlcXVlc3QucmVzdWx0O1xuICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgY2FjaGUucHVzaChyZXN1bHQudmFsdWUpXG4gICAgICAgICAgcmVzdWx0LmNvbnRpbnVlKClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXNvbHZlKGNhY2hlKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjdXJzb3JSYW5nZVJlcXVlc3Qub25lcnJvciA9ICgpID0+IHtcbiAgICAgICAgcmVqZWN0KGN1cnNvclJhbmdlUmVxdWVzdC5lcnJvcilcbiAgICAgIH1cbiAgICB9KVxuICB9XG4gIGRlbGV0ZVJlY29yZChvcHRpb246IElUaW55REIuSUdldEluZGV4ICl7XG4gICAgaWYoIW9wdGlvbikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdtdXN0IGJlIG9uZSBpbmRleCBvciBvcHRpb24nKVxuICAgIH1cbiAgICBpZih0eXBlb2Ygb3B0aW9uID09PSAnb2JqZWN0Jykge1xuICAgICAgcmV0dXJuIHRoaXMuZGVsZXRlUmVjb3JkQnlPcHRpb24ob3B0aW9uKVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5kZWxldGVSZWNvcmRCeVByaW1hcnlLZXkob3B0aW9uIGFzIElUaW55REIuSVZhbGlkYXRlS2V5KVxuICAgIH1cbiAgfVxuICBkZWxldGVSZWNvcmRCeU9wdGlvbihvcHRpb246IElUaW55REIuSUdldEluZGV4KSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuZ2V0QnlJbmRleChvcHRpb24pLnRoZW4oKGRhdGE6IGFueVtdKSA9PiB7XG4gICAgICAgIGlmICghZGF0YS5sZW5ndGgpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ25vdCBmaW5kIHRoaXMgcmVjb3JkJylcbiAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBkYXRhKSB7XG4gICAgICAgICAgY29uc3Qgc3RvcmUgPSB0aGlzLnJlcXVlc3RTdG9yZSgpXG4gICAgICAgICAgY29uc3QgeyBrZXlQYXRoIH0gPSBzdG9yZVxuICAgICAgICAgIGNvbnN0IGRlbGV0ZVJlcXVlc3QgPSBzdG9yZS5kZWxldGUoaXRlbVtrZXlQYXRoIGFzIHN0cmluZ10pXG4gICAgICAgICAgZGVsZXRlUmVxdWVzdC5vbnN1Y2Nlc3MgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXNvbHZlKHtcbiAgICAgICAgICAgICAgbXNnOiAnZGVsZXRlIHN1Y2Nlc3NmdWxseSEnLFxuICAgICAgICAgICAgICBzdGF0dXM6IHRydWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICAgIGRlbGV0ZVJlcXVlc3Qub25lcnJvciA9ICgpID0+IHtcbiAgICAgICAgICAgIHJlamVjdCh7XG4gICAgICAgICAgICAgIG1zZzogJ2RlbGV0ZSBmYWlsZWQhJyxcbiAgICAgICAgICAgICAgc3RhdHVzOiBmYWxzZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuICBkZWxldGVSZWNvcmRCeVByaW1hcnlLZXkocHJpbWFyeUtleTogSVRpbnlEQi5JVmFsaWRhdGVLZXkpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy5nZXRCeVByaW1hcnlLZXkocHJpbWFyeUtleSkudGhlbiggKGRhdGEpPT4ge1xuICAgICAgICBpZighZGF0YSkge1xuICAgICAgICAgIGNvbnNvbGUud2Fybignbm90IGZpbmQgdGhpcyByZWNvcmQnKVxuICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN0b3JlID0gdGhpcy5yZXF1ZXN0U3RvcmUoKVxuICAgICAgICBjb25zdCB7IGtleVBhdGggfSA9IHN0b3JlXG4gICAgICAgIGNvbnN0IGRlbGV0ZVJlcXVlc3QgPSBzdG9yZS5kZWxldGUoZGF0YVtrZXlQYXRoIGFzIHN0cmluZ10pXG4gICAgICAgIGRlbGV0ZVJlcXVlc3Qub25zdWNjZXNzID0gKCkgPT4ge1xuICAgICAgICAgIHJlc29sdmUoe1xuICAgICAgICAgICAgbXNnOiAnZGVsZXRlIHN1Y2Nlc3NmdWxseSEnLFxuICAgICAgICAgICAgc3RhdHVzOiB0cnVlXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBkZWxldGVSZXF1ZXN0Lm9uZXJyb3IgPSAoKSA9PiB7XG4gICAgICAgICAgcmVqZWN0KHtcbiAgICAgICAgICAgIG1zZzogJ2RlbGV0ZSBmYWlsZWQhJyxcbiAgICAgICAgICAgIHN0YXR1czogZmFsc2VcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0pXG4gIH1cbiAgY2xlYXIoKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IGNsZWFyUmVxdWVzdCA9IHRoaXMucmVxdWVzdFN0b3JlKCkuY2xlYXIoKVxuICAgICAgY2xlYXJSZXF1ZXN0Lm9uc3VjY2VzcyA9ICgpID0+IHtcbiAgICAgICAgcmVzb2x2ZSh7XG4gICAgICAgICAgbXNnOiAnY2xlYXIgc3VjY2Vzc2Z1bGx5IScsXG4gICAgICAgICAgc3RhdHVzOiB0cnVlXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICBjbGVhclJlcXVlc3Qub25lcnJvciA9ICgpID0+IHtcbiAgICAgICAgcmVqZWN0KHtcbiAgICAgICAgICBtc2c6ICdjbGVhciBmYWlsZWQhJyxcbiAgICAgICAgICBzdGF0dXM6IGZhbHNlLFxuICAgICAgICAgIGFjdGl2ZWRSZXF1ZXN0OiBjbGVhclJlcXVlc3RcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9KVxuICB9XG4gIGRlc3Ryb3llZCgpIHtcbiAgICB0aGlzLmRiID0gdW5kZWZpbmVkXG4gICAgdGhpcy5uYW1lID0gJydcbiAgfVxufSIsImltcG9ydCBUYWJsZSBmcm9tIFwiLi9UYWJsZVwiO1xuaW1wb3J0IHsgSVRpbnlEQiB9IGZyb20gXCIuL3R5cGVzL2luZGV4XCI7XG5cblxuY29uc3Qgd2luID0gKHR5cGVvZiB3aW5kb3cgPT0gXCJ1bmRlZmluZWRcIiA/IGdsb2JhbCA6IHdpbmRvdyk7XG5cbmNvbnN0IElOX0RCID0gd2luLmluZGV4ZWREQlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUaW55REIge1xuICBwcml2YXRlIGRiTmFtZTogc3RyaW5nO1xuICBwcml2YXRlIHZlcnNpb246IG51bWJlcjtcbiAgcHJpdmF0ZSBkYjogSURCRGF0YWJhc2VcbiAgc3RhdGljIG9mKCkge1xuICAgIHJldHVybiBuZXcgVGlueURCXG4gIH1cbiAgY29uc3RydWN0b3IoKSB7IH1cbiAgc2V0dXAob3B0aW9uczogSVRpbnlEQi5JRGF0YWJhc2UpIHtcbiAgICBjb25zdCB7IGRiTmFtZSB9ID0gb3B0aW9uc1xuICAgIHRoaXMuZGJOYW1lID0gZGJOYW1lXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgZ2V0VmVyc2lvbigpIHtcbiAgICByZXR1cm4gdGhpcy52ZXJzaW9uID8gdGhpcy52ZXJzaW9uIDogMVxuICB9XG4gIHNldFZlcnNpb24odmVyc2lvbjogbnVtYmVyKSB7XG4gICAgdGhpcy52ZXJzaW9uID0gdmVyc2lvblxuICAgIHJldHVybiB0aGlzXG4gIH1cbiAgdXBncmFkZShkYjogSURCRGF0YWJhc2UsIG9wdGlvbnM6IElUaW55REIuSVRhYmxlQ29uZmlnW10pIHtcbiAgICB0aGlzLnNldFZlcnNpb24oZGIudmVyc2lvbilcbiAgICB0aGlzLmRiID0gZGJcblxuICAgIGZvciAoY29uc3QgdGFibGUgb2Ygb3B0aW9ucykge1xuICAgICAgaWYgKCFkYi5vYmplY3RTdG9yZU5hbWVzLmNvbnRhaW5zKHRhYmxlLm5hbWUpKSB7XG4gICAgICAgIGNvbnN0IHN0b3JlID0gZGIuY3JlYXRlT2JqZWN0U3RvcmUodGFibGUubmFtZSwge1xuICAgICAgICAgIGtleVBhdGg6IHRhYmxlLnByaW1hcnlLZXksXG4gICAgICAgICAgYXV0b0luY3JlbWVudDogdGFibGUuYXV0b0luY3JlbWVudCA/IHRydWUgOiBmYWxzZVxuICAgICAgICB9KVxuICAgICAgICBpZiAodGFibGUuaW5kZXhzICYmIHRhYmxlLmluZGV4cy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IGluZGV4IG9mIHRhYmxlLmluZGV4cykge1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVJbmRleChzdG9yZSwge1xuICAgICAgICAgICAgICBpbmRleDogaW5kZXguaW5kZXgsXG4gICAgICAgICAgICAgIHJlbGF0aXZlSW5kZXg6IGluZGV4LnJlbGF0aXZlSW5kZXgsXG4gICAgICAgICAgICAgIHVuaXF1ZTogaW5kZXgudW5pcXVlXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBjcmVhdGVJbmRleChkYjogSURCT2JqZWN0U3RvcmUsIG9wdGlvbnM6IElUaW55REIuSUluZGV4KSB7XG4gICAgZGIuY3JlYXRlSW5kZXgob3B0aW9ucy5pbmRleCwgb3B0aW9ucy5yZWxhdGl2ZUluZGV4LCB7IHVuaXF1ZTogb3B0aW9ucy51bmlxdWUgfSlcbiAgfVxuICBjcmVhdGVUYWJsZShvcHRpb25zOiBJVGlueURCLklUYWJsZUNvbmZpZ1tdID0gdW5kZWZpbmVkKSB7XG4gICAgY29uc3QgeyBkYk5hbWUgfSA9IHRoaXNcblxuICAgIGlmIChvcHRpb25zID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBjb25zb2xlLmVycm9yKCdkYXRhYmFzZSB0YWJsZSBjb25maWcgbXVzdCBhIGxpc3QnKVxuICAgIH1cblxuICAgIGNvbnN0IHJlcXVlc3QgPSBJTl9EQi5vcGVuKGRiTmFtZSwgdGhpcy5nZXRWZXJzaW9uKCkpXG5cbiAgICBjb25zdCB1bmxpc3RlbiA9ICgpID0+IHtcbiAgICAgIHJlcXVlc3QucmVtb3ZlRXZlbnRMaXN0ZW5lcigndXBncmFkZW5lZWRlZCcsIHVwZ3JhZGUpO1xuICAgIH07XG5cbiAgICBjb25zdCB1cGdyYWRlID0gKCkgPT4ge1xuICAgICAgdGhpcy51cGdyYWRlKHJlcXVlc3QucmVzdWx0LCBvcHRpb25zKVxuICAgICAgdW5saXN0ZW4oKVxuICAgIH1cblxuICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcigndXBncmFkZW5lZWRlZCcsIHVwZ3JhZGUpXG5cbiAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy5jb25uZWN0KHJlcXVlc3QpLnRoZW4oZGIgPT4ge1xuICAgICAgICBjb25zdCB2ZXJzaW9uQ2hhbmdlID0gKGV2dDogSURCVmVyc2lvbkNoYW5nZUV2ZW50KSA9PiB7XG4gICAgICAgICAgZGIuY2xvc2UoKVxuICAgICAgICAgIGRiLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3ZlcnNpb25jaGFuZ2UnLCB2ZXJzaW9uQ2hhbmdlKVxuICAgICAgICB9XG4gICAgICAgIGRiLmFkZEV2ZW50TGlzdGVuZXIoJ3ZlcnNpb25jaGFuZ2UnLCB2ZXJzaW9uQ2hhbmdlKVxuICAgICAgfSlcbiAgICB9KVxuICAgIHJldHVybiBwcm9taXNlXG4gIH1cbiAgZGVsZXRlRGF0YWJhc2UobmFtZTogc3RyaW5nKSB7XG4gICBcbiAgICBjb25zdCByZXF1ZXN0ID0gSU5fREIuZGVsZXRlRGF0YWJhc2UobmFtZSlcbiAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG1zZzogSVRpbnlEQi5JU3RhdGUgPSB7XG4gICAgICAgICAgbXNnOiAnRGF0YWJhc2UgZGVsZXRlZCBzdWNjZXNzZnVsbHknLFxuICAgICAgICAgIHN0YXR1czogdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIHJlc29sdmUobXNnKVxuICAgICAgfVxuICAgICAgcmVxdWVzdC5vbmVycm9yID0gKCkgPT4ge1xuICAgICAgICBcbiAgICAgICAgY29uc3QgbXNnOiBJVGlueURCLklTdGF0ZSA9IHtcbiAgICAgICAgICBtc2c6ICdEYXRhYmFzZSBkZWxldGVkIGZhaWxlZCcsXG4gICAgICAgICAgc3RhdHVzOiB0cnVlLFxuICAgICAgICAgIGFjdGl2ZWRSZXF1ZXN0OiByZXF1ZXN0XG4gICAgICAgIH1cbiAgICAgICAgcmVqZWN0KG1zZylcbiAgICAgIH1cbiAgICB9KVxuICAgIHJldHVybiBwcm9taXNlXG4gIH1cbiAgY29ubmVjdDxUPihyZXF1ZXN0OiBJREJSZXF1ZXN0PFQ+LCBvcHRpb25zPzogSVRpbnlEQi5JUmVxdWVzdENhbGxiYWNrKTogUHJvbWlzZTxUPiB7XG5cbiAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2U8VD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXG4gICAgICBjb25zdCB1bmxpc3RlbiA9ICgpID0+IHtcbiAgICAgICAgcmVxdWVzdC5yZW1vdmVFdmVudExpc3RlbmVyKCdzdWNjZXNzJywgc3VjY2Vzcyk7XG4gICAgICAgIHJlcXVlc3QucmVtb3ZlRXZlbnRMaXN0ZW5lcignZXJyb3InLCBlcnJvcik7XG4gICAgICB9O1xuXG4gICAgICBjb25zdCBzdWNjZXNzID0gKCkgPT4ge1xuICAgICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLnN1Y2Nlc3NmdWxseSkge1xuICAgICAgICAgIG9wdGlvbnMuc3VjY2Vzc2Z1bGx5KHJlcXVlc3QpXG4gICAgICAgIH1cbiAgICAgICAgcmVzb2x2ZShyZXF1ZXN0LnJlc3VsdCk7XG4gICAgICAgIHVubGlzdGVuKClcbiAgICAgIH1cbiAgICAgIGNvbnN0IGJsb2NrZWQgPSAoKSA9PiB7XG4gICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuYmxvY2tlZCkge1xuICAgICAgICAgIG9wdGlvbnMuYmxvY2tlZChyZXF1ZXN0KVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGVycm9yID0gKCkgPT4ge1xuICAgICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmVycm9yKSB7XG4gICAgICAgICAgb3B0aW9ucy5lcnJvcihyZXF1ZXN0KVxuICAgICAgICB9XG5cbiAgICAgICAgcmVqZWN0KHJlcXVlc3QuZXJyb3IpO1xuICAgICAgICB1bmxpc3RlbigpXG4gICAgICB9XG4gICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Y2Nlc3MnLCBzdWNjZXNzKVxuICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGVycm9yKVxuICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdibG9ja2VkJywgYmxvY2tlZClcbiAgICB9KVxuXG4gICAgcmV0dXJuIHByb21pc2VcbiAgfVxuICBpbnNlcnQodGFibGVfbmFtZTogc3RyaW5nLCByZWNvcmQ6IGFueSkge1xuICAgIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCByZXF1ZXN0ID0gSU5fREIub3Blbih0aGlzLmRiTmFtZSwgdGhpcy5nZXRWZXJzaW9uKCkpXG4gICAgICB0aGlzLmNvbm5lY3QocmVxdWVzdCkudGhlbigoZGI6IElEQkRhdGFiYXNlKSA9PiB7XG4gICAgICAgIGNvbnN0IG9wZXJhdG9yID0gVGFibGUub2Yoe1xuICAgICAgICAgIG5hbWU6IHRhYmxlX25hbWUsXG4gICAgICAgICAgZGJcbiAgICAgICAgfSlcbiAgICAgICAgb3BlcmF0b3IuaW5zZXJ0KHJlY29yZCkudGhlbihyZXMgPT4gcmVzb2x2ZShyZXMpKS5jYXRjaCgoZXJyKSA9PiByZWplY3QoZXJyKSlcbiAgICAgIH0pXG4gICAgfSlcbiAgICByZXR1cm4gcHJvbWlzZVxuICB9XG4gIHVwZGF0ZVJlY29yZCh0YWJsZV9uYW1lOiBzdHJpbmcsIG9wdGlvbnM6IElUaW55REIuSUdldEluZGV4LCByZWNvcmQ6IGFueSkge1xuICAgIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCByZXF1ZXN0ID0gSU5fREIub3Blbih0aGlzLmRiTmFtZSwgdGhpcy5nZXRWZXJzaW9uKCkpXG4gICAgICB0aGlzLmNvbm5lY3QocmVxdWVzdCkudGhlbigoZGI6IElEQkRhdGFiYXNlKSA9PiB7XG4gICAgICAgIGNvbnN0IG9wZXJhdG9yID0gVGFibGUub2Yoe1xuICAgICAgICAgIG5hbWU6IHRhYmxlX25hbWUsXG4gICAgICAgICAgZGJcbiAgICAgICAgfSlcbiAgICAgICAgb3BlcmF0b3IudXBkYXRlKG9wdGlvbnMsIHJlY29yZCkudGhlbihyZXMgPT4gcmVzb2x2ZShyZXMpKS5jYXRjaCgoZXJyKSA9PiByZWplY3QoZXJyKSlcbiAgICAgIH0pXG4gICAgfSlcbiAgICByZXR1cm4gcHJvbWlzZVxuICB9XG4gIGdldEFsbCh0YWJsZV9uYW1lOiBzdHJpbmcpIHtcbiAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3QgcmVxdWVzdCA9IElOX0RCLm9wZW4odGhpcy5kYk5hbWUsIHRoaXMuZ2V0VmVyc2lvbigpKVxuICAgICAgdGhpcy5jb25uZWN0KHJlcXVlc3QpLnRoZW4oKGRiOiBJREJEYXRhYmFzZSkgPT4ge1xuICAgICAgICBjb25zdCBvcGVyYXRvciA9IFRhYmxlLm9mKHtcbiAgICAgICAgICBuYW1lOiB0YWJsZV9uYW1lLFxuICAgICAgICAgIGRiXG4gICAgICAgIH0pXG4gICAgICAgIG9wZXJhdG9yLmdldEFsbCgpLnRoZW4ocmVzID0+IHJlc29sdmUocmVzKSkuY2F0Y2goKGVycikgPT4gcmVqZWN0KGVycikpXG4gICAgICB9KVxuICAgIH0pXG4gICAgcmV0dXJuIHByb21pc2VcbiAgfVxuICBnZXRCeVByaW1hcnlLZXkodGFibGVfbmFtZTogc3RyaW5nLCBrZXk6IElUaW55REIuSVZhbGlkYXRlS2V5KSB7XG4gICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBJTl9EQi5vcGVuKHRoaXMuZGJOYW1lLCB0aGlzLmdldFZlcnNpb24oKSlcbiAgICAgIHRoaXMuY29ubmVjdChyZXF1ZXN0KS50aGVuKChkYjogSURCRGF0YWJhc2UpID0+IHtcbiAgICAgICAgY29uc3Qgb3BlcmF0b3IgPSBUYWJsZS5vZih7XG4gICAgICAgICAgbmFtZTogdGFibGVfbmFtZSxcbiAgICAgICAgICBkYlxuICAgICAgICB9KVxuICAgICAgICBvcGVyYXRvci5nZXRCeVByaW1hcnlLZXkoa2V5KS50aGVuKHJlcyA9PiByZXNvbHZlKHJlcykpLmNhdGNoKChlcnIpID0+IHJlamVjdChlcnIpKVxuICAgICAgfSlcbiAgICB9KVxuICAgIHJldHVybiBwcm9taXNlXG4gIH1cbiAgZ2V0QnlJbmRleCh0YWJsZV9uYW1lOiBzdHJpbmcsIG9wdGlvbnM6IElUaW55REIuSUdldEluZGV4KSB7XG4gICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBJTl9EQi5vcGVuKHRoaXMuZGJOYW1lLCB0aGlzLmdldFZlcnNpb24oKSlcbiAgICAgIHRoaXMuY29ubmVjdChyZXF1ZXN0KS50aGVuKChkYjogSURCRGF0YWJhc2UpID0+IHtcbiAgICAgICAgY29uc3Qgb3BlcmF0b3IgPSBUYWJsZS5vZih7XG4gICAgICAgICAgbmFtZTogdGFibGVfbmFtZSxcbiAgICAgICAgICBkYlxuICAgICAgICB9KVxuICAgICAgICBvcGVyYXRvci5nZXRCeUluZGV4KG9wdGlvbnMpLnRoZW4ocmVzID0+IHJlc29sdmUocmVzKSkuY2F0Y2goKGVycikgPT4gcmVqZWN0KGVycikpXG4gICAgICB9KVxuICAgIH0pXG4gICAgcmV0dXJuIHByb21pc2VcbiAgfVxuICBkZWxldGVSZWNvcmQodGFibGVfbmFtZTogc3RyaW5nLCBvcHRpb25zOiBJVGlueURCLklHZXRJbmRleCkge1xuICAgIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCByZXF1ZXN0ID0gSU5fREIub3Blbih0aGlzLmRiTmFtZSwgdGhpcy5nZXRWZXJzaW9uKCkpXG4gICAgICB0aGlzLmNvbm5lY3QocmVxdWVzdCkudGhlbigoZGI6IElEQkRhdGFiYXNlKSA9PiB7XG4gICAgICAgIGNvbnN0IG9wZXJhdG9yID0gVGFibGUub2Yoe1xuICAgICAgICAgIG5hbWU6IHRhYmxlX25hbWUsXG4gICAgICAgICAgZGJcbiAgICAgICAgfSlcbiAgICAgICAgb3BlcmF0b3IuZGVsZXRlUmVjb3JkKG9wdGlvbnMpLnRoZW4ocmVzID0+IHJlc29sdmUocmVzKSkuY2F0Y2goKGVycikgPT4gcmVqZWN0KGVycikpXG4gICAgICB9KVxuICAgIH0pXG4gICAgcmV0dXJuIHByb21pc2VcbiAgfVxuICBkZWxldGVUYWJsZSh0YWJsZU5hbWU6IHN0cmluZyl7XG4gICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpPT4ge1xuICAgICAgY29uc3QgY29ubl9yZXF1ZXN0ID0gSU5fREIub3Blbih0aGlzLmRiTmFtZSwgdGhpcy5nZXRWZXJzaW9uKCkpXG4gICAgICBjb25uX3JlcXVlc3Qub251cGdyYWRlbmVlZGVkID0gKGV2dDogSURCVmVyc2lvbkNoYW5nZUV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IGRiID0gY29ubl9yZXF1ZXN0LnJlc3VsdDtcblxuICAgICAgICB0aGlzLmRiID0gZGJcbiAgICAgICAgdGhpcy5zZXRWZXJzaW9uKGRiLnZlcnNpb24pXG5cbiAgICAgICAgaWYoZXZ0Lm9sZFZlcnNpb24gPCB0aGlzLmdldFZlcnNpb24oKSl7XG4gICAgICAgICAgZGIuZGVsZXRlT2JqZWN0U3RvcmUodGFibGVOYW1lKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25uX3JlcXVlc3Qub25zdWNjZXNzID0gKCkgPT4ge1xuICAgICAgICByZXNvbHZlKHtcbiAgICAgICAgICBtc2c6JyBkZWxldGVkIHRhYmxlIHN1Y2Nlc3NmdWxseSEnXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICBjb25uX3JlcXVlc3Qub25lcnJvciA9ICgpID0+IHtcbiAgICAgICAgcmVqZWN0KHtcbiAgICAgICAgICBtc2c6JyBkZWxldGVkIHRhYmxlIGZhaWxlZCEnXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSlcbiAgICBcbiAgICByZXR1cm4gcHJvbWlzZVxuICB9XG4gIHNvbWUodGFibGVfbmFtZTogc3RyaW5nLCBvcHRpb25zOiBJVGlueURCLklTb21lT3B0aW9ucykge1xuICAgIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCByZXF1ZXN0ID0gSU5fREIub3Blbih0aGlzLmRiTmFtZSwgdGhpcy5nZXRWZXJzaW9uKCkpXG4gICAgICB0aGlzLmNvbm5lY3QocmVxdWVzdCkudGhlbigoZGI6IElEQkRhdGFiYXNlKSA9PiB7XG4gICAgICAgIGNvbnN0IG9wZXJhdG9yID0gVGFibGUub2Yoe1xuICAgICAgICAgIG5hbWU6IHRhYmxlX25hbWUsXG4gICAgICAgICAgZGJcbiAgICAgICAgfSlcbiAgICAgICAgb3BlcmF0b3Iuc29tZShvcHRpb25zKS50aGVuKHJlcyA9PiByZXNvbHZlKHJlcykpLmNhdGNoKChlcnIpID0+IHJlamVjdChlcnIpKVxuICAgICAgfSlcbiAgICB9KVxuICAgIHJldHVybiBwcm9taXNlXG4gIH1cbiAgY2xlYXJUYWJsZVJlY29yZCh0YWJsZV9uYW1lOiBzdHJpbmcpIHtcbiAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3QgcmVxdWVzdCA9IElOX0RCLm9wZW4odGhpcy5kYk5hbWUsIHRoaXMuZ2V0VmVyc2lvbigpKVxuICAgICAgdGhpcy5jb25uZWN0KHJlcXVlc3QpLnRoZW4oKGRiOiBJREJEYXRhYmFzZSkgPT4ge1xuICAgICAgICBjb25zdCBvcGVyYXRvciA9IFRhYmxlLm9mKHtcbiAgICAgICAgICBuYW1lOiB0YWJsZV9uYW1lLFxuICAgICAgICAgIGRiXG4gICAgICAgIH0pXG4gICAgICAgIG9wZXJhdG9yLmNsZWFyKCkudGhlbihyZXMgPT4gcmVzb2x2ZShyZXMpKS5jYXRjaCgoZXJyKSA9PiByZWplY3QoZXJyKSlcbiAgICAgIH0pXG4gICAgfSlcbiAgICByZXR1cm4gcHJvbWlzZVxuICB9XG4gIGdldERhdGFXaXRoTGltaXRzKHRhYmxlX25hbWU6IHN0cmluZywgb3B0aW9uczogSVRpbnlEQi5JTGltdCkge1xuICAgIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCByZXF1ZXN0ID0gSU5fREIub3Blbih0aGlzLmRiTmFtZSwgdGhpcy5nZXRWZXJzaW9uKCkpXG4gICAgICB0aGlzLmNvbm5lY3QocmVxdWVzdCkudGhlbigoZGI6IElEQkRhdGFiYXNlKSA9PiB7XG4gICAgICAgIGNvbnN0IG9wZXJhdG9yID0gVGFibGUub2Yoe1xuICAgICAgICAgIG5hbWU6IHRhYmxlX25hbWUsXG4gICAgICAgICAgZGJcbiAgICAgICAgfSlcbiAgICAgICAgb3BlcmF0b3IubGltaXQob3B0aW9ucykudGhlbihyZXMgPT4gcmVzb2x2ZShyZXMpKS5jYXRjaCgoZXJyKSA9PiByZWplY3QoZXJyKSlcbiAgICAgIH0pXG4gICAgfSlcbiAgICByZXR1cm4gcHJvbWlzZVxuICB9XG59XG5cbiIsImltcG9ydCBUaW55REIgZnJvbSBcIi4vVGlueURCXCI7XG5cbmlmKCF3aW5kb3cuVGlueURCKSB7XG4gIHdpbmRvdy5UaW55REIgPSBUaW55REI7XG59XG5cbmV4cG9ydCB7IFxuICBUaW55REJcbn0iXX0="}